# 操作系统做了什么

```c
#include <stdio.h>
int main (int argc, char* argv[]) {
  puts("hello world");
  return 0;
}
// 用户告诉操作系统执行程序
// os到磁盘上查找文件并检查是否是可执行文件
// 确定代码和数据的位置
// 创建新的进程，并将可执行文件映射到进程中
// 为程序设置上下文环境

// 缺页异常，分配物理内存给程序，从磁盘中读数据到内存中
// helloworld程序执行puts函数，（系统调用）， 在显示器上写一串字符
// 操作系统： 找到字符串要显示的设备，os把字符串传给该设备的进程
```



# 操作系统的定义和作用

1. 资源管理者： 
    - 硬件资源： cpu， 内存， 设备（i/o，磁盘， 时钟，网络卡）
    - 软件资源
    - 怎么管理资源：
        - 跟踪记录资源的**使用情况**--数据结构
        - 确定资源**分配策略**--算法
            - 静态分配策略
            - 动态分配策略
        - 实时的资源**分配和回收**
        - 提高**资源利用率**
        - 协调进程对**资源请求**对冲突
    - 资源管理的五大基本功能： 
        - 进程/线程管理：
            - 进程线程状态，控制，同步互斥，通信，调度
        - 存储管理:
            - 分配/回收， 地址转换，存储保护，内存扩充
        - 文件管理：
            - 文件目录，文件操作，磁盘空间，文件存取控制
        - 设备管理：
            - 设备驱动，分配回收，缓冲技术
        - 用户接口：
            - 系统命令，编程接口
2. 系统服务的提供者：
    - 典型的服务： 进程线程的利用， 文件和目录的操作， i/o的使用，信息统计
3. 对硬件机器的扩展： 屏蔽硬件细节，为用户提供一个扩展的虚拟机器

# 操作系统的特征

1. **并发**（concurrency）：指处理多个同时性的活动
    - 活动切换，保护，相互依赖的活动间的同步
    - 单cpu：宏观上，这些程序在同时执行，但微观上只有一个程序在执行
    - 并行（parallel）：与并发类似，但多指不同程序在不同的硬件上执行
2. **共享**：操作系统与多个用户的程序共同使用计算机中的资源，要求os对资源进行合理的分配和使用，使得资源在一个时间段内交替被多个进程使用。
    - 互斥共享（打印机）
    - 同时共享
3. **虚拟**： 物理实体映射为若干个对应的逻辑实体，分时或分空间，为了提高资源利用率
    - cpu： 
    - 存储器：
    - 显示设备：
4. **随机**： 对以不可预测的次序发生的事件进行响应并处理
    - 进程的运行速度不可预知，多个进程并发执行
    - 很难重现os某个状态

# 典型操作系统的架构

1. **Windows体系架构**： 

    - 用户态：
        - 系统进程，服务进程，用户进程，环境子进程
        - 动态链接库（dll）
    - 内核态
        - 硬件抽象层（hal）
        - 内核模块
        - 设备驱动程序
        - 图形和窗口系统
        - 执行体： 提供函数支持

2. **unix架构**：
- 硬件
    - 操作系统内核
        - 调度
        - 进程通信
        - 文件系统
        - 设备驱动
    - 系统调用接口： 
    - unix各种命令和库
    
3. **Linux架构**： 
- 用户态：
    - 内核态： 
        - 系统调用接口
        - 进程和调度
        - 虚存的管理和物理内存的管理
        - 文件系统
        - 设备驱动程序
        - 网络驱动程序
        - 异常处理，中断处理
    
4. **Android架构**： 
- linux内核
    - 系统库和Android运行时
- 应用程序框架
    - Android应用程序

# 操作系统分类

1. 伴随着硬件技术，应用需求，软件技术的发展而发展
2. 传统操作系统的分类：
    - 批处理操作系统
        - 多道批处理系统: 是单道批处理的扩展，与多处理器无关。
        - SPOOLing系统（技术）
            Simultaneous Peripheral Operation On-Line
            （同时的外围设备联机操作，也称作“假脱机技术”）
            利用磁盘作缓冲，将输入、计算、输出分别组织成独立的任务流，使得I/O和计算真正的并行。（批处理系统的实现通常所采用的技术）
    - 分时操作系统
        - 时间片： 将cpu的时间划分若干个片段，轮流为终端服务
    - 实时操作系统：
        - 及时响应外部事件请求
    - 个人计算机操作系统
    - 网络操作系统
        - 基于计算机网络，在各种计算机操作系统上，按照网络体系结构协议标准开发的软件。
            （实现网络管理，网络通信，网络安全，资源共享和各种网络应用）
    - 分布式操作系统
        - 或以计算机网络为基础，或以多处理机为基础，基本特征是“处理分布在不同计算机上”
        - 分布式操作系统：是一个统一的操作系统，允许若干个计算机相互协作共同完成一项任务。
    - 嵌入式系统



